@import "./mixins";

$component: #{$prefix}-modal;

// *************************************
//
//   Modal
//
// *************************************
// -------------------------------------
//   Modal Block
// -------------------------------------
.#{$prefix}-modal {
    display: flex;
    justify-content: center;
    align-items: top;
    position: fixed;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 10px;
    padding-top: 0;
    text-align: center;
    z-index: z("modal");
}

// -------------------------------------
//   Modal Elements
// -------------------------------------
.#{$prefix}-modal {
    // Container
    &__container {
        width: $modal-width-full;
        height: $modal-height;
        max-width: $modal-width-base;
        max-height: $modal-max-height;
        margin: 0 auto;
        background-color: $c-bg-light;
        display: flex;
        flex-direction: column;
        position: relative;
        border-radius: 0 0 $modal-border-radius $modal-border-radius;
        box-shadow: $modal-box-shadow;
        overflow: hidden;
        text-align: left;
        z-index: z("front");
        transition: width .15s;
    } // Body
    &__body {
        flex: 1 1 auto;
        position: relative;
        overflow: auto;
        display: flex;
        flex-direction: column;
        padding-bottom: 24px;

        &--padding {
            padding: 24px;
        }

        &--remove-padding-bottom {
            padding-bottom: 0 !important;
        }
    } // Header
    &__header {
        flex: 0 0 auto;
    } // Footer
    &__footer {
        flex: 0 0 auto;
        padding: 0 24px;
        text-align: right;
        border-top: 1px solid $c-modal-border;
    }
}

// -------------------------------------
//   Modal Sizes
// -------------------------------------
.#{$prefix}-modal {
    // Small
    &--small {
        .#{$prefix}-modal__container {
            max-width: $modal-width-small;
        }
    } // Large
    &--large {
        .#{$prefix}-modal__container {
            max-width: $modal-width-large;
        }
    } // Full
    &--full {
        .#{$prefix}-modal__container {
            max-width: $modal-width-full;
        }
    }
}

// -------------------------------------
//   Modal Position
// -------------------------------------
.#{$prefix}-modal {
    &--center {
        align-items: center;
        padding-top: 10px;

        .#{$prefix}-modal__container {
            border-radius: $modal-border-radius;
        }
    }
}

// -------------------------------------
//   Modal Modifies
// -------------------------------------
.#{$prefix}-modal {
    // Active State
    &--active {
        // Backdrop
        .#{$prefix}-modal__backdrop {
            opacity: 0;
            animation: anim-fade-in .3s forwards;
        } // Container
        .#{$prefix}-modal__container {
            opacity: 0;
            animation: anim-slide-down .4s forwards;
        }
    }
}

// -------------------------------------
//   width indent for multiple modal
// -------------------------------------

@for $i from 1 through $modal-indent-layer-max - 1 {
    // ---------------------------------
    // this will generate selector like `.#{$prefix}-base-layer ~ .#{$prefix}-base-layer .#{$prefix-modal}`
    // which is long and ugly, but
    // 1. it's more complicated and error prone to handle layer count in React side
    // 2. it's rare to use multiple modal in our use cases.
    // so we handle indent by css.
    // ---------------------------------
    #{repeat-str('.#{$prefix}-base-layer ~', $i)} .#{$prefix}-base-layer {
        .#{$prefix}-modal {
            &__container {
                width: calc(#{$modal-width-full} - #{$i * 16}px);
                max-width: $modal-width-base - $i * 16px;
                height: $modal-height - $i * 8px;
            }

            &--large {
                > .#{$prefix}-modal__container {
                    max-width: $modal-width-large - $i * 16px;
                }
            }

            &--small {
                > .#{$prefix}-modal__container {
                    max-width: $modal-width-small - $i * 16px;
                }
            }
        }
    }
}
